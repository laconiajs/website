<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Creating API Endpoints · Laconia</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;overview&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#overview&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Overview&lt;/h2&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Creating API Endpoints · Laconia"/><meta property="og:type" content="website"/><meta property="og:url" content="https://laconiajs.io/index.html"/><meta property="og:description" content="&lt;h2&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;overview&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#overview&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Overview&lt;/h2&gt;
"/><meta property="og:image" content="https://laconiajs.io/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://laconiajs.io/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-137047564-1"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-137047564-1');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/laconia.svg" alt="Laconia"/><h2 class="headerTitleWithLogo">Laconia</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/introduction/getting-started" target="_self">Getting Started</a></li><li class="siteNavGroupActive"><a href="/docs/api/intro" target="_self">API</a></li><li class=""><a href="/help" target="_self">Help</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/introduction/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/motivation">Motivation</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/core-concepts">Core Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/philosophy">Philosophy</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/examples">Examples</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/faq">FAQ</a></li><li class="navListItem"><a class="navItem" href="/docs/introduction/support-me">Support Me</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Laconia vs. Other</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/vs/claudia">Claudia</a></li><li class="navListItem"><a class="navItem" href="/docs/vs/express-koa">Express, Koa, Hapi, etc.</a></li><li class="navListItem"><a class="navItem" href="/docs/vs/middy">Middy</a></li><li class="navListItem"><a class="navItem" href="/docs/vs/serverless-sam">Serverless, SAM, Apex, etc.</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/guides/injecting-dependencies">Injecting Dependencies</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/unit-testing">Unit Testing</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/adapting-events">Adapting Events</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/guides/creating-api-endpoints">Creating API Endpoints</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/retrieving-secrets">Retrieving Secrets</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/retrieving-config">Retrieving Config</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/warming-up">Warming Up</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/invoking-other-lambdas">Invoking Other Lambdas</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/long-running-tasks">Long Running Tasks</a></li><li class="navListItem"><a class="navItem" href="/docs/guides/creating-middleware">Creating Middleware</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API Reference</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/api/intro">API Reference: Intro</a></li><li class="navListItem"><a class="navItem" href="/docs/api/core">core</a></li><li class="navListItem"><a class="navItem" href="/docs/api/event">event</a></li><li class="navListItem"><a class="navItem" href="/docs/api/adapter">adapter</a></li><li class="navListItem"><a class="navItem" href="/docs/api/adapter-api">adapter-api</a></li><li class="navListItem"><a class="navItem" href="/docs/api/invoker">invoker</a></li><li class="navListItem"><a class="navItem" href="/docs/api/config">config</a></li><li class="navListItem"><a class="navItem" href="/docs/api/batch">batch</a></li><li class="navListItem"><a class="navItem" href="/docs/api/middleware-lambda-warmer">middleware-lambda-warmer</a></li><li class="navListItem"><a class="navItem" href="/docs/api/middleware-serverless-plugin-warmup">middleware-serverless-plugin-warmup</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/laconiajs/website/edit/master/docs/guides/creating-api-endpoints.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Creating API Endpoints</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>Laconia supports parsing and responding to AWS API Gateway Lambda Proxy
Integration. Like other <a href="/docs/guides/adapting-events">AWS Lambda events</a>, Laconia
provides two ways for you to adapt API Gateway events into your applications:</p>
<ul>
<li>Creating your own adapter</li>
<li>Using Laconia built-in adapters</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="the-principles"></a><a href="#the-principles" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The principles</h2>
<p>Laconia encourages single-purpose functions, which means most of your routing
needs must be defined in API Gateway instead of Lambda.</p>
<p>Incoming events should be able to be treated with plain function. The requests
that are coming in are function arguments, the response that goes out is a
<code>return</code> statement. This means Laconia does not support the typical semantic of
<code>req</code> and <code>res</code> from other web frameworks like Express.</p>
<h2><a class="anchor" aria-hidden="true" id="creating-an-adapter"></a><a href="#creating-an-adapter" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating an adapter</h2>
<p>As Laconia is encouraging you to design your ports first, it is likely that you
will need to implement your own adapter. Let's take an example of an API
endpoint for creating an arbitrary order. You can implement it with the
<a href="/docs/api/event"><code>event</code></a> package like this:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> laconia = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@laconia/core"</span>);
<span class="hljs-keyword">const</span> { req, res } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@laconia/event"</span>).apigateway;

<span class="hljs-comment">// Your core application</span>
<span class="hljs-keyword">const</span> createOrder = <span class="hljs-keyword">async</span> orderDetails =&gt; {
  <span class="hljs-comment">// Creates order...</span>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Duplicate order Id"</span>);
};

<span class="hljs-keyword">const</span> adapter = <span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> <span class="hljs-keyword">async</span> event =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> r = req(event); <span class="hljs-comment">// Parse raw API Gateway event</span>
    <span class="hljs-keyword">const</span> orderDetails = r.body; <span class="hljs-comment">// JSON parse the request body if content-type is application/json</span>
    <span class="hljs-keyword">const</span> output = <span class="hljs-keyword">await</span> app(orderDetails);
    <span class="hljs-keyword">return</span> res(output); <span class="hljs-comment">// Creates an API Gateway response</span>
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-comment">// Perform `JSON.stringify` automatically and set status code to 500</span>
    <span class="hljs-keyword">return</span> res({ <span class="hljs-attr">error</span>: { <span class="hljs-attr">message</span>: err.message } }, <span class="hljs-number">500</span>);
  }
};

exports.handler = laconia(adapter(createOrder));
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="composition"></a><a href="#composition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Composition</h3>
<p>Laconia believes that intuitive API design is the design that's closest to the
programming language used. To support shared code, such as additional headers
for CORS across multiple Lambdas, you can do a simple composition like this:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> withCors = <span class="hljs-function"><span class="hljs-params">next</span> =&gt;</span> <span class="hljs-keyword">async</span> (...args) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> next(...args);
  response.headers[<span class="hljs-string">"Access-Control-Allow-Origin"</span>] = <span class="hljs-string">"*"</span>;
  <span class="hljs-keyword">return</span> response;
};

<span class="hljs-keyword">const</span> adapter = <span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> withCors(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> res(<span class="hljs-string">"hello"</span>));
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="error-handling"></a><a href="#error-handling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error handling</h3>
<p>Your application code must not contain any HTTP details, this would include
error handling. The error must be handled in the <code>catch</code> block of your adapter.
You can check the error object's properties to customise the status code or
error body, such as by checking its name.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> adapter = <span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> event =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> app(req(event).body);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">if</span> (err.name === <span class="hljs-string">"ValidationError"</span>) {
      <span class="hljs-keyword">return</span> res(<span class="hljs-string">"ValidationError is thrown, the error was ..."</span>, <span class="hljs-number">400</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> res(<span class="hljs-string">"Unknown error"</span>, <span class="hljs-number">500</span>);
    }
  }
};
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="using-built-in-adapter"></a><a href="#using-built-in-adapter" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using built-in adapter</h2>
<p>Laconia also provides built-in adapters to handle simple adapter
implementations. When building REST API, the <a href="/docs/api/adapter-api"><code>adapter-api</code></a>
only supports GET or POST at the moment as you can only select either <code>body</code> or
<code>params</code> input type at one time. Also, please <em>only use the built-in adapters
when it matches with your application's ports</em>. Taking the previous example of
creating an arbitrary order, you can use the Laconia built-in adapters like
this:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> laconia = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@laconia/core"</span>);
<span class="hljs-keyword">const</span> adapterApi = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@laconia/adapter-api"</span>);

<span class="hljs-comment">// Your core application</span>
<span class="hljs-keyword">const</span> createOrder = <span class="hljs-keyword">async</span> orderDetails =&gt; {
  <span class="hljs-comment">// Creates order...</span>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Duplicate order Id"</span>);
};

<span class="hljs-keyword">const</span> apigateway = adapterApi.apigateway({
  <span class="hljs-attr">inputType</span>: <span class="hljs-string">"body"</span>,
  <span class="hljs-attr">errorMappings</span>: {
    <span class="hljs-string">".*"</span>: <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> ({
      <span class="hljs-attr">body</span>: { <span class="hljs-attr">error</span>: { <span class="hljs-attr">message</span>: err.message } },
      <span class="hljs-attr">statusCode</span>: <span class="hljs-number">500</span>
    })
  }
});

exports.handler = laconia(apigateway(app)).register(instances);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="additional-headers"></a><a href="#additional-headers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Additional headers</h3>
<p>To add additional headers like CORS, you can specify <code>responseAdditionalHeaders</code>
configuration like this:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> apigateway = adapterApi.apigateway({
  <span class="hljs-attr">responseAdditionalHeaders</span>: {
    <span class="hljs-string">"Access-Control-Allow-Origin"</span>: <span class="hljs-string">"*"</span>
  }
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="error-handling-1"></a><a href="#error-handling-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error handling</h3>
<p>The built-in adapter supports a simple mapping from error name thrown from your
application, to the response that it should return. The mapping is done by
specifying a regex, and the adapter will test the error thrown against each of
the regex in the mapping specified.</p>
<p>The following example returns statusCode 400 when ValidationError is returned.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> apigateway = adapterApi.apigateway({
  <span class="hljs-attr">errorMappings</span>: {
    <span class="hljs-string">"Validation.*"</span>: <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> ({ <span class="hljs-attr">statusCode</span>: <span class="hljs-number">400</span> }),
    <span class="hljs-string">"Other.*"</span>: <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> ({ <span class="hljs-attr">statusCode</span>: <span class="hljs-number">404</span> })
  }
});
</code></pre>
<p>If the sequence of regex testing in your mapping is important, you can also
specify a <code>Map</code> instead of an <code>Object</code>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/guides/adapting-events"><span class="arrow-prev">← </span><span>Adapting Events</span></a><a class="docs-next button" href="/docs/guides/retrieving-secrets"><span>Retrieving Secrets</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a></li><li><a href="#the-principles">The principles</a></li><li><a href="#creating-an-adapter">Creating an adapter</a><ul class="toc-headings"><li><a href="#composition">Composition</a></li><li><a href="#error-handling">Error handling</a></li></ul></li><li><a href="#using-built-in-adapter">Using built-in adapter</a><ul class="toc-headings"><li><a href="#additional-headers">Additional headers</a></li><li><a href="#error-handling-1">Error handling</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/laconia.svg" alt="Laconia" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/introduction/getting-started">Getting Started</a><a href="/docs/en/introduction/core-concepts">Core Concepts</a><a href="/docs/en/api/intro">API Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/laconiajs" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://gitter.im/laconiajs/laconia">Chat</a></div><div><h5>More</h5><a href="https://twitter.com/laconiajs" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://github.com/laconiajs/laconia">GitHub</a><a class="github-button" href="https://github.com/laconiajs/laconia" data-icon="octicon-star" data-count-href="/laconiajs/laconia/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 Wisen Tanasa</section><section class="copyright">Logo designed by <a href="https://www.linkedin.com/in/suzie-nam-471980b7/">Suzie Nam</a></section></footer></div></body></html>